
Andrew Ng 교수님의 Prompt 강의와 OpenAI Cookbook 을 통해서 프롬포트 작성 가이드를 정리해봤습니다.

ChatGPT 가 나오고 나서 이걸 잘 쓰는게 개발자에게 많이 중요해졌다고 생각합니다. TDD 창시자인 Kent Beck 은 ChatGPT 가 나오고 나서 자신이 가진 90% 의 Skill 이 무의미해졌다고 말할 정도니까요. 여담이지만 나머지 10% 가 1000x 중요해졌다고 합니다. ChatGPT 를 잘 쓰려면 Prompt 를 잘 만드는게 중요한데요. 이런 방법들에 대해서 아는게 나온다면 글로 정리해볼게요.


<Prompt 작성이 중요한 이유>

13 * 17 = ? 이라는 질문에 3초내로 대답해보라는 명령을 받았다고 가정해보자. 인간은 이런 질문에 틀릴 수 있다. 근데 그렇다고 인간은 두 자리수 곱셈 계산을 못하느냐? 라고 물어본다면 그렇지 않다.

LLMs 도 이와 비슷하다. 한번에 답을 물으면 틀릴 수 있지만 차근차근 물어보도록 (= Let's think step by step) 질문하면 제대로 답을한다.

사람들이 자주하는 오해가 있는데 나의 질문에 언어 모델이 답을 틀리게 낸다면 “아 이 정도 수준의 일은 못하는 구나!” 라고 생각할 수 있는데 어떤 Prompt 로 지시하느냐에 따라 정답을 낼수도 있고 못낼수도 있다.

Prompt 에 `Let's think step by step` 을 붙인다면 답을 더 정확하게 작성한다고 한다. 이 Prompt 는 나름 General 하게 쓸 수 있고 특히 문제 풀이에서 정답률을 극적으로 올린다. (18% → 79% 까지 향상)


<Prompt 작성 원칙>

크게 두 가지 원칙을 기억하자.
Write clear and specific instructions (명확하게 지시하기)
Give the model time to think. (모델에게 생각할 시간을 주기)


명확하게 지시하는 방법으로 Few-shot Prompting 이라는게 있다. 이는 예시를 Prompt 에 예시를 던저주는 것이다.
예를 통해서 보자. 다음은 문제 풀이를 내는 Prompt 이다.
Q: Roger 는 5 개의 테니스 공이 있다. 그는 테니스 공이 들어간 두 개의 캔을 샀고, 각각의 캔에는 3개의 공이 들어있다. 이때 테니스 공의 총 개수는?
A: (여기서 어떻게 계산하는지 알려주는 것이다.) Roger 는 5개의 공으로 시작했고, 2 개의 캔에는 각각 3개의 공이 들어있으니 총 6개의 공이 있다. 그러므로 5 + 6 = 11 이다.
Q: (이제 내가 물어보고 싶은 문제를 작성한다.) 카페에는 23개의 사과가 있다. 20개는 점심에 사용했고, 6개를 추가로 샀다. 이때 사과의 총 개수는?

이렇게 Prompt 에 Few-shot 방식으로 예시를 던져주면 훨씬 더 잘 대답한다. 성능적으로는 약 3배정도 (18% -> 57%) 더 뛰어나다.


이제 다음 방법인 모델에게 생각할 시간을 주는 방법을 보자. 모델에게 한번에 결론을 내도록 하는게 아니라 중간 단계인 Step 들을 명시해서 이를 먼저 수행하도록 하거나, 결론을 내기전에 풀어야 할 핵심 과제가 있다면 이를 먼저 수행하도록 지시하는 것이다.

Step 별로 질문을 단순화 해가면서 복잡한 질문을 처리하는 방법으로 Least-to-most prompting 이라고 한다. Prompt 로는 `To solve {question}, we need to first solve:` 을 명시하는 것이다. 아니면 `Perform the following actions: step1: … , step2: … step3: … 이렇게 step 을 명시하면 된다.`Least-to-most prompting 을 했을 때 복잡한 추론 문제에 대해서 성능이 16% -> 99.7% 로 향상되었다고 한다.



<Prompt 는 어떻게 개발하는 걸까>

Prompt 는 반복적인 개발 프로세스 (Iterative Prompt Development) 를 통해서 개발된다. 특별하게 복잡한 건 없다. 분석하고 개선하는 노력이 필요할 뿐.

Prompt 개발 프로세스는 이렇다고 한다.
1) 명확하고 구체적인 지시를 LLMs 에게 전달
2) 원하는 결과가 안나왔다면 왜 그런지 분석한다.
3) 이를 바탕으로 Prompt 를 refine 한다.
4) 1-3 과정을 반복한다.

Andrew Ng 교수님은 Effective Prompt Engineer 라도 완벽하게 모든 프롬포트를 처음부터 알고 있지 않을 것이라고한다. 단지 이 과정을 잘 수행할 뿐. 