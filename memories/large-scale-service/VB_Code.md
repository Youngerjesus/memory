# VB Code 와 속도감각

압축과 I/O 는 끊을래야 끊을 수 없는 관계다. 큰 데이터를 압축하먼 I/O 의 작업은 그만큼 빨라질 것이므로.

여기서는 정수열을 압축하는 VB Code 알고리즘을 소개하겠다.

- 물론 이거 말고도 압축 알고리즘은 많다.
- Golomb 부호 알고리즘
- Interpolate 부호 알고리즘 등

바로 예시로 보자. 5 와 130 을 VB Code 로 압축하면 다음과 같다.

- 5: 10000101
- 130:  00000001 10000010
- VB 코드에서 바이트의 첫 비트는 플래그 비트로 나타내고 이 바이트가 “끝” 이라는 의미를 나타낸다.
- 그래서 5의 경우는 첫비트가 1이고 나머지 7 비트로 계산하면 된다.
- 130 의 경우는 첫바이트가 끝이 아니고 두 번째 바이트의 첫 비트가 1 로 해당 바이트가 끝이라는 걸 나타낸다.
- 그래서 첫 바이트의 끝 1비트가 128 을 나타내고 두 번째 바이트에 있는 값이 2 를 나타내서 130 으로 결과가 나온다.
- 이렇게 VB Code 를 나타내면 원래 정수를 표현하는 4 바이트의 값을 많이 줄일 수 있다.

이 VB Code 는 정렬된 숫자인 경우 더 크게 효과를 나타낼 수 있는데 다음과 같이 정렬되어 있다고 보자.

- 3, 5, 20, 21, 23 50, 77, 100
- 이 경우 단순하게 증가하는 형태로 정렬되어 있으니까 이 배열을 첫 시작부터 차분으로 나타내면 복원하는게 가능해진다. 즉 다음과 같이 표현할 수 있다.
- 3, 2, 15, 1, 2, 27, 27, 23
- 이렇게 표현 + VB Code 로 하면 전부다 1 바이트로 표현을 할 수 있으니까 데이터 압축을 엄청할 수 있을 것이다.

### 압축의 기초

- 압축을 할 때 캐싱과 비슷한 매커니즘을 기억해두면 좋다.
- 자주 사용하는 기호는 짧은 숫자로, 자주 사용하지 않는 기호는 큰 숫자로. 짧은 숫자는 짧은 비트로 나타내기 너무나 쉽기 때문에 압축이 효율적이다.
- 모스 부호도 이런 식으로 표현되어있다.