## Code Review

코드 리뷰는 개발 과정에서 가장 쉽게 적용할 수 있으나. 가장 큰 효과를 볼 수 있도록 하는 도구다. 

코드 리뷰의 시초는 코드 인스펙션 이라고 하는 파간(fagan) 에 의해 소개되었다. 

코드 인스펙션은 소프트웨어 개발이 끝난 후 전문 인스펙션팀이 정해진 프로세스와 패턴에 따라서 코드를 검증하고 결함을 찾는 프로세스다.

즉 코드 리뷰를 하는 목적은 소프트웨어의 결함을 찾고 이를 개선하는 목적이 주 이며 이를 통해 때로는 후배 개발자에게 가르침을 주는 목적도 있다.

코드 리뷰를 하는 기법은 되게 다양하게 있는데 이를 하나씩 소개해보겠다.

#### 코드 인스펙션

코드 리뷰 중에 가장 정형적인 패턴을 가진 방법이다. 

주로 전문화된 인스펙션 팀을 가지고 테스트를 하는데 인스펙션 팀은 역할에 각각의 역할에 따라서 존재한다.

- 중재자(Moderator) 

  - 인스펙션 팀의 실질적인 매니저라고 생각하면 된다. 
  
  - 주로 인스펙션 팀과 코드를 작성한 개발팀간의 인터페이스를 담당하게 되고 필요한 리소스를 확보하는 작업을 하게된다.
  예를 들면 인스펙션 팀이 코드 리뷰 중에 필요한 자원이 필요하다면 이를 개발한 개발자를 섭외하거나 문서를 받아오는 역할을 한다.
  
  - 또 인스펙션을 하는 정의와 인스펙션을 하는 종료 조건을 정의하고 산출물의 정리를 담당한다.

- 리더(Leader)

  - 리더는 각종 산출물과 인터뷰를 통해서 어떻게 인스펙션을 진행할건지를 결정한다. 
  
  - 리더는 시스템을 가장 잘 알고 있는 사람이어야 하고 문제를 예측할 수 있어야한다.

- 디자이너와 코더(Designer/Coder)

  - 디자이너와 코더는 리더가 정한 방식대로 코드를 검증하는 역할을 한다.
  
- 테스터(Tester)

  - 테스터는 인스펙션이 진행 중인 모듈에 대해서 테스트를 수행하고 결함을 찾아내는 역할을 한다.
  
이 4명의 역할을 가지고 인스펙션은 다음과 같이 6가지 형태로 진행된다.

##### 1. 계획(Planning)

현재 코드 인스펙션에 대한 계획을 수립한다. 

##### 2. 오버뷰(Overview)

이 단계에서는 인스펙션에 대한 교육이 이뤄지고 역할이 정해진다.

##### 3. 준비(Preparation)

인스펙션을 하기 위한 사전준비 단계로 각자 역할별로 필요한 문서를 습득해서 이해하고 인터뷰도 진행한다. 

또한 이 단계에서는 필요하다면 테스트하는 환경을 구축하는 일도 한다.

##### 4. 인스펙션(Inspection)

각자의 역할에 따라서 인스펙션을 수행한다.

인스펙션을 통해서 결함을 발견하고 이를 기록한다.

##### 5. 재작업(Rework)

보고된 결함을 수정한다.

##### 6. 후처리(Follow-up)

보고된 모든 결함이 수정되었는지를 확인한다. 

#### 팀 리뷰

팀 리뷰는 코드 인스펙션보다 좀 덜 정형화되었지만 이것도 일정한 프로세스와 계획을 따른다.

역할도 코드 인스펙션보다 단순한데 팀 리뷰에서는 반드시 중재자와 발표자는 필요하다.

리뷰 시간에는 발표자가 코드에 대해서 설명하고 팀원은 결함이나 개선사항을 제공한다.

이 과정에서 중재자는 리뷰의 주제를 선정해서 리뷰를 진행하고 리뷰에서 나온 의견을 정리해서 기록한다. 

중재자는 팀 내에서 가장 실력이 좋은 사람으로 하는게 좋고 리뷰를 할 때 감정 상하는 일이 없도록 잘 중재해야한다.

팀 리뷰를 하는 시간은 일주일 단위로 정기적으로 하는것도 좋고 릴리즈가 나올때 등 비정기적일 때도 좋다.

#### 워크스루(Walk through)

워크스루는 단체로 하는 코드 리뷰 기법중에서 가장 비정형적인 방법 중의 하나다.

발표자가 리뷰를 하는 시간이나 주제를 정해서 회의를 모으는 식으로 진행되는데 주로 아이디어나 의견을 듣기위해 만드는 경우가 많고 
코드 리뷰보다는 버그에 대한 논의나 정보 공유를 위해서 하는 경우가 많다.

유일하게 발표자만이 리뷰를 주관하고 발표하는 역할을 가지며 다른 참여 인원들은 아무런 책임이나 역할을 가지지 않는다. 

그래서 집중을 하지 않을 확률이 있으므로 이를 염두해두고 회의를 진행해야한다. 

#### 피어 리뷰 또는 오버 더 숄드 리뷰

피어 리뷰나 오버 더 숄드 리뷰는 주로 2~3명이 진행하는 코드 리뷰 방법중의 하나다. 

코드의 작성자가 모니터를 띄어놓고 설명하고 다른 사람들은 그 설명을 들으면서 개선 점이나 결함을 발견하는 방법이다. 

사전 준비물이 필요가 없으므로 필요할 때마다 자주 하는 방법중 하나이며 주로 선배 개발자가 후배 개발자를 위해 교육하는 용도로 사용하거나
후배 개발자의 코드 품질을 높이는 목적으로 사용한다.

이 기법은 선배 개발자의 역량에 따라서 코드의 결과물이 나오며 이 일은 시간 투여량이 상대적으로 많으므로 이것도 테스크로 쳐줘야한다.

#### 패스어라운드

패스어라운드는 직역하자면 돌려보기다. 

작성자가 리뷰 할 부분을 메일이나 시스템을 통해서 연락하면 참석자들이 이걸보고 비동기적으로 시간을 내서 코드 리뷰를 하는 방법이다.

기존의 리뷰 방식과는 다르게 시간과 장소의 구애를 받지않는다. 리모트에 강하고 실시간이 아닌 비동기 방식이므로 느릴 수 있다를 항상 생각해둬야 한다.

이 방법은 항상 해야할 의무를 띄지 않으므로 팀원들 개개인이 에자일한 방식에 대한 이해가 있어야 한다. 



