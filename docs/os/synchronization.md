## 동기화 문제

한정적인 시스템 자원을 여러 스레드가 동시에 접근해서 사용할 때 예상치 못한 결과가 나올 수 있다. 이를 막기 위한 것.

이런 동시성 상황에서 동기화 문제는 어딜가나 있는 것 같다. 

- 데이터베이스에서 Optimistic Lock 이나 Pessimistic Lock 이 있다. 

- Java 에서 synchronized block (모니터 락을 이용하는것)을 만들거나 Volatile 이나 Atomic Variable 을 이용하는 것

- 커널에서 세마포어나 뮤텍스를 이용하는 것

이런 것들이 있다. 

### Database

Optimistic Lock 은 커밋시에 버전 정보가 맞다면 업데이트를 하고 버전정보가 업데이트 되었다면 예외를 발생시키는 것 

Pessimistic Lock 은 애초에 쿼리를 시작하면서 데이터에 락을 걸고 커밋하면서 락을 푸는 구조. 

#### Java

Volatile 은 CPU Cache 에 값을 쓰는게 아니라 Main Memory 까지 내려가서 값을 저장하는 것을 말한다. 

#### 커널

세마포어는 Counter 라는 한정된 개수를 통해 공유된 자원의 데이터를 여러 프로세스나 스레드가 접근하는 것을 막는 것. 

뮤텍스를 통해 두 스레드가 동시에 사용할 수 없도록 하는 것이 있다. 

#### 뮤텍스와 모니터의 차이

뮤텍스는 여러 프로세스나 스레드 간의 동기화를 위해 사용되는 거라면 모니터는 하나의 프로세느 내에서 다른 스레드간에 동기화를 할 때 사용한다.

뮤텍스는 운영체제나 커널에서 주로 사용되는 반면애 모니터는 프레임워크나 라이브러리에서 상용된다.

#### 세마포어와 뮤텍스의 차이

세마포어는 뮤텍스가 될 수 있지만 카운터의 값을 1로 둠으로써 뮤텍스는 세마포어가 될 수 없다.

세마포어는 그리고 소유할 수 없고 뮤텍스는 소유하는게 가능하다. 



   