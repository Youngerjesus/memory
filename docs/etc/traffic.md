## 대규모 트래픽 디자인 

1. 로드밸런서의 Spec 

2. 하나의 인스턴스가 처리할 수 있는 요청의 량   

3. 실제 스트레스를 줄 수 있는 툴 

   - 사용자가 요청할 수 있는 API 들을 모두 조합해서 로테이션으로 보낼 것 같다. 
    
     - 일관된 API 만 사용한다면 캐시가 모든 걸 처리할 확률이 있기 떄문에 (Redis 같은 분산 캐시도 있을거고 
      MySQL 같은 데이터베이스에서도 SQL 구문 자체에 최적의 실행계획을 캐싱해놓기도 하고 자주 사용하는 데이터블록도
      메모리에 저장해둔다. 그러므로 하나의 API 만 사용하면 안될 것 같다.)
      
4. CPU 와 메모리 모니터링 임계치 까지 쓰고 있는지.  

5. 실제 라이브 서버와 똑같은 환경에서의 테스트 - 병목지점이 있는지.

#### Summary 

일단 서버에 스트레스를 줄 수 있는, 부하를 줄 수 있는 툴을 찾고 거기에서 사용자가 요청할 수 있는 API 들을 
로테이션으로 계속해서 날릴 수 있도록 세팅을 할 것 같다. 

여러가지 API 를 사용하는게 아닌 하나의 API 씩 테스트를 한다면 Redis 같은 캐시가 데이터베이스 대신에 처리할 확
률이 높을 것 같고 데이터베이스 안에서도 여러가지 캐시가 있다. SQL 구문 자체에 대해서 최적의 실행 계획을 캐싱
해놓기도 할거고 자주 엑세스 하는 데이터블록 자체가 메모리에 올라가 있을거니까. 
그래서 여러가지 API 들을 리스트로 해놔서 한번에 실행하도록 할 것 같다.   

그게 세팅이 끝나면 하나의 테스트 서버 인스턴스를 켜서 라이브 서버의 인스턴스 사양으로 맞춘 후에 거기에 부하를 주고 모니터링을 하면서 어느 지점부터 예외가 발생하고
CPU 와 메모리가 임계치 까지 먹는지 확인을 해서 이 인스턴스 기준으로 이 정도 처리를 하겠다 라는 것들을 계산해둔다. 

이후 실제 테스트 서버의 구조를 라이브 서버와 맞춰놓고 부하테스트를 해보고 실제 예상만큼 처리량이 나오는지 확인하고
병목지점을 체크한다. 데이터베이스 쪽에서 원한는 처리량이 안나오면 Replication 을 늘리던지 해서 해본다.   

 

 
  