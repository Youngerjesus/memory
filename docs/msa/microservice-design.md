## Microservice Design Guide

#### Microservice 의 정의

Martin Flower 가 한 정의는 각각의 서비스는 작지만 자신만의 비즈니스 문제를 해결할 수 있고
각 서비스끼리는 느슨하게 연결되어야 한다. 그리고 각각의 서비스는 자신만의 개발 사이클과 코드 베이스를 가진다.


#### Microservice 의 장점

- 서비스마다 독립적인 Scale 규모를 정할 수 있다 라는 것. 

- 서비스 마다 독립적인 개발 라이프 사이클을 가질 수 있다라는 것. (다른 팀의 배포가 우리 팀의 배포와 크게 관련이 없다라는 점)


### Microservice Design Pattern

#### API Gateway

- 서비스로 부하를 분산시켜줄 수 있는 로드밸런싱

- 등록되지 않은 URI 인 경우 API Gateway 에서 요청을 거부할 수 있도록 하느 기능

- 각각의 서비스에서 서블릿 필터나 스프링 시큐리티 필터를 추가해서 쓰는게 아닌 인증과 인가에 관련 처리를 API Gateway 에서 하도록

- 이런 일들을 API Gateway 에서 진행하도록 하면서 관심사를 나눌 수 있다.

#### Asynchronous Communication

- 서비스와 서비스간의 비동기 통신을 위한 서비스 지원

#### Service Mesh 

- 서비스와 서비스 끼리의 통신을 사이드카 인젝션을 통해서 생성된 Proxy 를 통해서 이뤄지는 것. 

- 프록시는 컨트롤 플레인에 등록되어있는 서비스 정보를 받아서 서비스 디스커버리를 할 수 있고 Istio 를 기준으로
장애가난 서비스에 호출을 하지않는 Circuit Breaker 를 적용하는게 가능하고. 마이크로서비스 기준으로 여러개의 
서비스가 뜨는 경우가 많은데 그래서 모니터링 하기 어려운 문제도 많다. 그래서 그런 모니터링을 하기위한 지표를 수집하는 것.

#### 마이크로서비스 설계

이벤트 스토밍을 통한 마이크로서비스 설계를 했다. 

우리가 만드는 서비스에서 어떤 이벤트가 발생하고 이벤트를 발생시키는 트리거는 누구고 외부 시스템을 사용한다면 이를 도출하는 식으로
진행했고 그 후에 컨택스트 경계를 설정하고 연결하는 작업으로 마이크로서비스를 설계했다. 
 